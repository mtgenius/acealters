export default () => {
  let cache = Object.create(null);
  return (classes) => {
    let changed = false;
    const temp = Object.create(null);
    for (const [ className, value ] of Object.entries(classes)) {
      if (
        !Object.prototype.hasOwnProperty.call(cache, className) ||
        cache[className] !== value
      ) {
        changed = true;
      }
      temp[className] = value;
    }
    if (changed) {
      cache = temp;
    }
    return cache;
  };
};
